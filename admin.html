<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | CareerLift</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>

    <div class="admin-container">
        <aside class="sidebar" id="adminSidebar">
            <div class="logo">
                <i class="fa-solid fa-shield-halved"></i> Admin<span>Panel</span>
                <i class="fa-solid fa-xmark" onclick="toggleSidebar()" style="margin-left:auto; cursor:pointer; font-size:1.2rem; display:none;" id="closeSidebarBtn"></i>
            </div>
            <ul class="menu">
                <li class="active" onclick="showSection('dashboard'); toggleSidebar()"><i class="fa-solid fa-chart-pie"></i> Users</li>
                <li onclick="showSection('add-course'); toggleSidebar()"><i class="fa-solid fa-plus-circle"></i> Add Course</li>
                <li onclick="showSection('manage-courses'); toggleSidebar()"><i class="fa-solid fa-book"></i> Manage Courses</li>
                <li onclick="showSection('manage-enrollments'); toggleSidebar()"><i class="fa-solid fa-users-gear"></i> Enrollments</li>
                
                <li onclick="logout()" style="margin-top: 50px; color: #ff6b6b;"><i class="fa-solid fa-right-from-bracket"></i> Logout</li>
            </ul>
        </aside>

        <main class="content">
            
            <button class="mobile-menu-btn" onclick="toggleSidebar()">
                <i class="fa-solid fa-bars"></i> Menu
            </button>

            <section id="dashboard" class="admin-section active">
                <h2>Registered Users</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Phone</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="userTableBody"></tbody>
                    </table>
                </div>
            </section>

            <section id="add-course" class="admin-section">
                <h2>Add New Course</h2>
                <form id="addCourseForm" class="glass-form">
                    <div class="form-row">
                        <input type="text" id="cTitle" placeholder="Course Title" required>
                        <select id="cCategory">
                            <option value="medical">Medical</option>
                            <option value="freelancing">Freelancing</option>
                            <option value="diploma">Diploma</option>
                            <option value="Programming">Programming</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <input type="text" id="cThumb" placeholder="Thumbnail Image URL" required>
                        <select id="cType" onchange="toggleCourseFields()">
                            <option value="free">Free Course</option>
                            <option value="paid">Paid Course</option>
                        </select>
                    </div>

                    <div id="freeFields">
                        <h4>Free Course Details</h4>
                        <textarea id="cSyllabus" placeholder="Course Syllabus" rows="3"></textarea>
                        <textarea id="cNote" placeholder="Class Notes" rows="3"></textarea>
                        <input type="text" id="cVideo" placeholder="YouTube/Drive Video Link">
                    </div>

                    <div id="paidFields" style="display:none;">
                        <h4>Paid Course Details</h4>
                        <div class="form-row">
                            <input type="text" id="cPrice" placeholder="Price (e.g. 15000 BDT)">
                            <input type="text" id="cCode" placeholder="Special Code (e.g. CL-2025-001)">
                        </div>
                        <textarea id="cOverview" placeholder="Course Overview" rows="3"></textarea>
                        <textarea id="cPaidNote" placeholder="Premium Notes" rows="3"></textarea>

                        <div id="lectureContainer">
                            <label style="display:block; margin-bottom:10px; color:#aaa;">Lectures (Meeting Links)</label>
                            <div class="lecture-row form-row">
                                <input type="text" class="lec-title" placeholder="Lecture 1 Title">
                                <input type="text" class="lec-link" placeholder="Meeting Link">
                            </div>
                        </div>
                        <button type="button" class="btn-small" onclick="addLectureField()">+ Add Lecture</button>
                    </div>

                    <button type="submit" class="btn-submit">Publish Course</button>
                </form>
            </section>

            <section id="manage-courses" class="admin-section">
                <h2>Existing Courses</h2>
                <div id="adminCourseGrid" class="course-grid-admin"></div>
            </section>

            <section id="manage-enrollments" class="admin-section">
                <h2>Student Enrollments</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Student</th>
                                <th>Course</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="enrollmentTableBody"></tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <div id="editUserModal" class="user-modal-overlay" style="display:none; position:fixed; inset:0; align-items:center; justify-content:center; background:rgba(0,0,0,0.55); backdrop-filter:blur(4px); z-index:9999;">
        <div class="user-modal" style="width:420px; padding:25px 30px; background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15); border-radius:14px; backdrop-filter:blur(12px); position:relative; color:#fff; box-shadow:0 0 25px rgba(0,0,0,0.3);">
            <span onclick="closeEditUserModal()" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:1.6rem; color:#fff;">&times;</span>
            <h3 style="margin-bottom:18px; font-size:1.4rem; font-weight:600; text-align:center;">Edit User</h3>
            <form id="editUserForm" style="display:flex; flex-direction:column; gap:12px;">
                <input type="hidden" id="editUserId">
                <input type="text" id="editUserName" placeholder="Full Name" required style="padding:10px; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); border-radius:8px; color:#fff;">
                <input type="email" id="editUserEmail" placeholder="Email" required style="padding:10px; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); border-radius:8px; color:#fff;">
                <input type="text" id="editUserPhone" placeholder="Phone" style="padding:10px; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); border-radius:8px; color:#fff;">
                <select id="editUserRole" style="padding:10px; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); border-radius:8px; color:#fff;">
                    <option value="student">Student</option>
                    <option value="admin">Admin</option>
                </select>
                <button type="submit" style="margin-top:12px; padding:10px; border:none; border-radius:8px; background:#4c8bf5; color:#fff; font-weight:600; cursor:pointer;">Update User</button>
            </form>
        </div>
    </div>

    <div id="userModal" class="user-modal-overlay" style="display:none; position:fixed; inset:0; align-items:center; justify-content:center; background:rgba(0,0,0,0.5); z-index:10000;">
        <div class="user-modal" style="width:350px; background:#1e293b; padding:25px; border-radius:12px; color:#fff; border:1px solid rgba(255,255,255,0.1); text-align:center;">
            <h3 style="margin-bottom:15px; color:#38bdf8;">User Details</h3>
            <p><strong>Name:</strong> <span id="mName"></span></p>
            <p><strong>Email:</strong> <span id="mEmail"></span></p>
            <p><strong>Role:</strong> <span id="mRole"></span></p>
            <p><strong>Phone:</strong> <span id="mPhone"></span></p>
            <p><strong>Joined:</strong> <span id="mDate"></span></p>
            <button onclick="closeUserModal()" style="margin-top:20px; padding:8px 20px; background:#ef4444; border:none; border-radius:5px; color:white; cursor:pointer;">Close</button>
        </div>
    </div>

    <div id="editCourseModal" class="user-modal-overlay" style="display:none; position:fixed; inset:0; align-items:center; justify-content:center; background:rgba(0,0,0,0.5); z-index:9999;">
        <div class="user-modal" style="width:600px; max-height:90vh; overflow-y:auto; background:#1e293b; padding:20px; border-radius:12px; position:relative; border:1px solid rgba(255,255,255,0.1);">
            <span onclick="closeEditModal()" style="position:absolute; top:12px; right:18px; cursor:pointer; font-size:1.4rem; color:white;">&times;</span>
            <h3 style="margin-bottom:10px; color:var(--primary);">Edit Course</h3>
            <form id="editCourseForm" class="glass-form" style="border:none; padding:0; background:transparent;">
                <input type="hidden" id="editId">
                <input type="text" id="editTitle" placeholder="Course Title" required>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;">
                    <select id="editCategory"><option value="medical">Medical</option><option value="freelancing">Freelancing</option><option value="diploma">Diploma</option></select>
                    <input type="text" id="editPrice" placeholder="Price">
                </div>
                <input type="text" id="editThumb" placeholder="Thumbnail URL" required style="margin-top:10px;">
                <textarea id="editOverview" placeholder="Description" rows="4" style="margin-top:10px;"></textarea>
                <button type="submit" class="btn-submit" style="margin-top:12px;">Save Changes</button>
            </form>
        </div>
    </div>

    <script src="js/admin.js"></script>
    <script>
        // TOGGLE SIDEBAR FUNCTION
        function toggleSidebar() {
            const sidebar = document.getElementById('adminSidebar');
            const closeBtn = document.getElementById('closeSidebarBtn');
            sidebar.classList.toggle('active');
            
            // Show close button only on mobile when sidebar is active
            if(window.innerWidth <= 900) {
                closeBtn.style.display = sidebar.classList.contains('active') ? 'block' : 'none';
            }
        }
    </script>
</body>
</html>